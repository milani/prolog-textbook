\chapter{حقایق، قواعد و پرسش}
\clearpage
\section{چند مثال ساده}
در پرولوگ تنها سه ساختار وجود دارد: حقایق\پانوشت{Facts}، قواعد\پانوشت{Rules} و پرسش‌ها\پانوشت{Queries}. مجموعه قواعد و حقایق با نام پایگاه دانش\پانوشت{\متن‌لاتین{Knowledge base}} یا پایگاه داده\پانوشت{\متن‌لاتین{Database}} شناخته می‌شوند. برنامه نویسی به زبان پرولوگ به معنی ساختن یک پایگاه داده است که در آن حقایق و قواعد مرتبط با مسئله مورد نظر ما درج شده‌اند. بدین ترتیب استفاده از این برنامه به صورت پرسش میسر است. یعنی ورودی برنامه پرسشی در مورد اطلاعات موجود در پایگاه داده است.

به چند پایگاه داده به زبان پرولوگ توجه کنید:

\subsection{\lr{Knowledge Base 1}}
پایگاه داده ۱ مجموعه ای از حقایق است. حقایق برای نمایش مواردی بکار می‌روند که بدون قید و شرط درست هستند. به عنوان مثال در اینجا گفته ایم که Mia و Judy و Yolanda زن هستند و Judy نوازنده گیتار است و مهمانی برقرار.

\begin{latin}
\begin{lstlisting}[title=KB1.pl]
womain(mia).
woman(judy).
woman(yolanda).
playsAirGuitar(jody).
party.
\end{lstlisting}
\end{latin}

به این نکته توجه کنید که حرف اول تمام کلمات کوچک است. اینکار بی‌دلیل نیست. به زودی دلیل آن را خواهید دانست.

حال چطور می‌توانیم از این پایگاه داده استفاده کنیم؟ با پرسش سؤال در مورد اطلاعاتی که در KB1 وجود دارد. مثلاً می‌توانیم بپرسیم که آیا ‌Mia زن است؟

\begin{latin}
?- woman(mia).
\end{latin}

پرولوگ پاسخ خواهد داد:

\begin{latin}
yes
\end{latin}

واضح است که پرولوگ پاسخ صحیح داده است زیرا این حقیقت در پایگاه داده صریحاً درج شده است. توجه دارید که \متن‌لاتین{?-} علامت اعلان خط فرمان\پانوشت{prompt} در پرولوگ است و بسته به نسخه پرولوگی که استفاده می‌کنید می‌تواند متفاوت باشد. این علامت نشان می‌دهد که پرولوگ آماده دریافت دستور است. ما تنها پرسش مورد نظر خود (\متن‌لاتین{woman(mia)} به همراه نقطه انتهایی را درج می‌کنیم. نقطه انتهایی مهم است. بدون آن پرولوگ منتظر دریافت ادامه پرسش می‌ماند و کار خود را شروع نمی‌کند.

می‌توانیم سوالات دیگری از ‌‌پرولوگ بپرسیم. می‌خواهیم بدانیم آیا Jody گیتار می‌نوازد؟

\begin{latin}
\begin{lstlisting}
?- playsAirGuitar(jody).
yes
\end{lstlisting}
\end{latin}

پرولوگ پاسخ مثبت داد. اما اگر همین سوال را در مورد Mia بپرسیم پرولوگ چه پاسخی می‌دهد؟

\begin{latin}
\begin{lstlisting}
?- playsAirGuitar(mia).
no
\end{lstlisting}
\end{latin}

چرا پاسخ منفی بود؟ به این دلیل که حقیقتی مبنی بر نواختن گیتار توسط Mia در پایگاه داده وجود نداشت. بعلاوه KB1 پایگاه داده ساده‌ای است و قوانینی برای استنتاج نوازنده بودن در آن موجود نیست تا به پرولوگ برای یافتن پاسخ کمک کند. در ادامه در مورد قوانین بیشتر خواهید دانست.

حال سوال دیگری از پرولوگ می‌پرسیم:

\begin{latin}
\begin{lstlisting}
?- playsAirGuitar(vincent).
no
\end{lstlisting}
\end{latin}

پرولوگ پاسخ منفی می‌دهد. چرا؟ چون اطلاعاتی در مورد Vincent در پایگاه داده وجود ندارد. بنابراین طبق اطلاعات موجود ما نمی‌توانیم نتیجه بگیریم که Vincent نوازنده گیتار است.

به طور مشابه اگر از پرولوگ بپرسیم:

\begin{latin}
\begin{lstlisting}
?- married(Jody).
no
\end{lstlisting}
\end{latin}

دوباره پاسخ منفی است. زیرا این پرسش در مورد خصوصیتی (متاهل بودن) است که ما اطلاعی از آن نداریم پس نمی‌توانیم از اطلاعات موجود نتیجه بگیریم که Jody متاهل است. در بعضی از پیاده سازی های پرولوگ، پرسیدن این سوال باعث بروز خطا می‌شود و اعلام می‌شود که married تعریف نشده است.

به همین ترتیب می‌توانیم در مورد گزاره party هم سوال بپرسیم:

\begin{latin}
\begin{lstlisting}
?- party.
yes
\end{lstlisting}
\end{latin}

\subsection{\lr{Knowledge Base 2}}
با مثال دیگری کار را ادامه می‌دهیم.

\begin{latin}
\begin{lstlisting}[title=KB2]
happy(yolanda). 
listens2Music(mia). 
listens2Music(yolanda):-  happy(yolanda). 
playsAirGuitar(mia):-  listens2Music(mia). 
playsAirGuitar(yolanda):-  listens2Music(yolanda).
\end{lstlisting}
\end{latin}

در این پایگاه داده، دو حقیقت \متن‌لاتین{happy(yolanda)} و \متن‌لاتین{listens2Music(mia)} تعریف شده اند. سه مورد بعد قوانینی هستند که در این پایگاه تعریف شده‌است.

قانون یا قاعده اطلاعی است که مقدار درستی آن شرطی است و برحسب اطلاعات دیگر تعیین می‌شود. به عنوان مثال قاعده اول KB2 می‌گوید Yolanda موسیقی گوش می‌کند اگر شاد باشد. یا قاعده سوم می‌گوید Yolanda گیتار می‌نوازد اگر به موسیقی گوش می‌دهد. کافی است \متن‌لاتین{:-} را به صورت «اگر» یا «منتج می‌شود از» بخوانیم. قسمت سمت چپ \متن‌لاتین{:-}، سر یا head قاعده و قسمت سمت راست، بدنه یا body قاعده است. به صورت کلی یک قاعده می‌گوید اگر بنده درست باشد، سر قاعده نیز درست است.

بنابراین اگر پایگاه داده شامل قاعده‌ای به صورت \متن‌لاتین{head :- body} باشد و پرولوگ بر اساس اطلاعات دیگر موجود در پایگاه بداند که body درست است، می‌تواند نتیجه بگیرد که head هم درست است. به این نوع استنتاج «وضع مقدم\پانوشت{\متن‌لاتین{modus ponens}}» گفته می‌شود.

حال از پرولوگ می‌پرسیم:

\begin{latin}
\begin{lstlisting}
?- playsAirGuitar(mia).
\end{lstlisting}
\end{latin}

پاسخ مثبت است. زیرا هرچند پرولوگ نمی‌تواند حقیقت \متن‌لاتین{playsAirGuitar(mia)} را در KB2 بیابد، اما قاعده \متن‌لاتین{playsAirGuitar(mia):-  listens2Music(mia).} را می‌بیند. و علاوه بر این حقیقت \متن‌لاتین{listens2Music(mia)} نیز در KB2 وجود دارد. بنابراین با استفاده از وضع مقدم نتیجه می‌گیرد که \متن‌لاتین{playsAirGuitar(mia)} درست است.

با یک سوال دیگر می‌توان نشان داد که پرولوگ می‌تواند به صورت زنجیره‌ای از وضع مقدم استفاده کند:

\begin{latin}
\begin{lstlisting}
?- playsAirGuitar(yolanda).
yes
\end{lstlisting}
\end{latin}

پاسخ مثبت است زیرا پرولوگ با استفاده از حقیقت \متن‌لاتین{happy(yolanda)} و قاعده \\
 \متن‌لاتین{listens2Music(yolanda):-  happy(yolanda)} \\
نتیجه می‌گیرد که \متن‌لاتین{listens2Music(yolanda)}. هرچند این حقیقت به صورت صریح در KB2 وجود ندارد اما پرولوگ از آن استفاده می‌کند و با استفاده از قاعده \متن‌لاتین{playsAirGuitar(yolanda):-  listens2Music(yolanda)}  نتیجه می‌گیرد که باید پاسخ مثبت بدهد. پس هر حقیقتی که با استفاده از وضع مقدم نتیجه شود می‌تواند به صورت ورودی برای قواعد دیگر مورد استفاده قرار بگیرد. به این ترتیب با استفاده زنجیری از وضع مقدم پرولوگ قادر است اطلاعاتی که بطور منطقی از قواعد و حقایق موجود قابل نتیجه گیری است، بدست آورد.

به قواعد و حقایق موجود در یک پایگاه داده، clause گفته می‌شود.

